image: cypress/browsers:node12.14.1-chrome85-ff81
options:
  max-time: 120

pipelines:
  default:
  - step:
      name: Install dependencies
      caches:
        - npm
        - cypress
        - node
      script:
        - yarn
  - step:
      name: Cypress in Chrome only
      caches:
        - npm
        - cypress
        - node
      script:
        - yarn cy:run:headless
  - step:
      name: Cypress in Firefox only
      caches:
        - npm
        - cypress
        - node
      script:
        - yarn cy:run:firefox

  
definitions:
  caches:
    npm: $HOME/.npm
    cypress: $HOME/.cache/Cypress